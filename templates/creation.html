<!DOCTYPE html>
<html lang="en">

<head>
    <title>Creation</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='common.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='home.css') }}">
    <link rel="canonical" href="http://getbootstrap.com/docs/5.3/examples/navbars/">
    <link rel="canonical" href="http://getbootstrap.com/docs/5.3/examples/cheatsheet/">
    <link rel="stylesheet" href="http://cdn.jsdelivr.net/npm/@docsearch/css@3">
    <link rel="stylesheet" href="{{ url_for('static', filename='navbars.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='cheatsheet.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='bootstrap.min.css') }}">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='color-modes.js') }}"></script>
</head>

<body>
    <main>
        {% include "top.html" %}
        <section id="request-job">
            <h2 class="fw-bold pt-3 pt-xl-5 pb-2 pb-xl-3 text-center">Step 1</h2>
            <article class="my-3" id="overview">
                <div class="bd-heading align-self-center mt-5 mb-3 mt-xl-0 mb-xl-2 text-center">
                    <h3>Prepare BackTest Data</h3>
                </div>
                <div class="row row-cols-1 row-cols-md-1 g-4" style="margin: 0 auto; width: 30%;">
                    <div class="bd-example-snippet bd-code-snippet">
                        <div class="bd-example m-0 border-0">
                            <form action="/creation/request-new-data-streaming" style="width: 50%; margin: 0 auto;">
                                <div class="mb-3">
                                    <label for="job-name" class="form-label">*Date Time selection type:</label>
                                    <input type="text" id="datetime-selection-type" name="datetime-selection-type" class="form-control text-center" value="1" required>
                                </div>
                                <div class="mb-3">
                                    <label for="from-date" class="form-label">*From Date:</label>
                                    <input type="date" id="from-date" name="from-date" class="form-control text-center" value="2023-04-03" required>
                                </div>
                                <div class="mb-3">
                                    <label for="to-date" class="form-label">*To Date:</label>
                                    <input type="date" id="to-date" name="to-date" class="form-control text-center" value="2023-05-03" required>
                                </div>
                                <div class="mb-3">
                                    <label for="from-time" class="form-label">*From Time:</label>
                                    <input type="time" id="from-time" name="from-time" class="form-control text-center" value="09:00:00" required>
                                </div>
                                <div class="mb-3">
                                    <label for="to-time" class="form-label">*To Time:</label>
                                    <input type="time" id="to-time" name="to-time" class="form-control text-center" value="16:30:00" required>
                                </div>
                                <div class="mb-3">
                                    <label for="class-code" class="form-label">*Class Code:</label>
                                    <input type="text" id="class-code" name="class-code" class="form-control text-center" value="HSI" required>
                                </div>
                                <div class="mb-3">
                                    <label for="fut-opt" class="form-label">*Future Option:</label>
                                    <input type="text" id="fut-opt" name="fut-opt" class="form-control text-center" value="F" required>
                                </div>
                                <div class="mb-3">
                                    <label for="expiry-mth" class="form-label">Expiry Month:</label>
                                    <input type="text" id="expiry-mth" name="expiry-mth" class="form-control text-center ">
                                </div>
                                <div class="mb-3">
                                    <label for="strike-prc" class="form-label">Strike Price:</label>
                                    <input type="text" id="strike-prc" name="strike-prc" class="form-control text-center">
                                </div>
                                <div class="mb-3">
                                    <label for="call-put" class="form-label">Call/Put:</label>
                                    <input type="text" id="call-put" name="call-put" class="form-control text-center">
                                </div>
                                <div class="mb-3">
                                    <label for="retention-hour" class="form-label">*Retention Hour:</label>
                                    <input type="number" id="retention-hour" name="retention-hour" class="form-control text-center" value="1">
                                </div>
                                <div class="text-center">
                                    <button class="btn btn-primary" type="submit">Request Job</button>
                                </div>
                                <img id="requesting-new-job-icon" class="icon-button-hidden" src="{{ url_for('static', filename='loading.gif') }}">
                            </form>
                        </div>
                    </div>
                </div>
            </article>
        </section>
    </main>
</body>
{% include "base.html" %}
<script>
    function requestNewDataStreaming(){
        var form = $(this);
        var url = form.attr('action');
        var data = form.serialize();
        fetch(url, {
            method: 'POST',
            body: formData
        }).then(response => response.text())
        .then(data => {
            var toast = document.createElement('div');
            toast.className = 'toast';
            toast.innerHTML = data;
            document.body.appendChild(toast);
            setTimeout(function() {
                toast.classList.add('show');
            }, 100);
            setTimeout(function() {
                toast.classList.remove('show');
                document.body.removeChild(toast);
            }, 3000);
        });
    }
</script>
</html>